# .htaccess في المجلد الرئيسي
RewriteEngine On

# السماح بالوصول إلى ملفات PHP في مجلد admin
RewriteRule ^admin/ - [L]

# منع الوصول المباشر إلى ملفات PHP الحساسة (باستثناء admin)
<FilesMatch "\.(php)$">
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order allow,deny
        Allow from all
    </IfModule>
</FilesMatch>

# استثناء الملفات الرئيسية بشكل صريح (اختياري)
<Files "index.php">
    Require all granted
</Files>

<Files "events.php">
    Require all granted
</Files>

<Files "event.php">
    Require all granted
</Files>

<Files "about.php">
    Require all granted
</Files>

<Files "contact.php">
    Require all granted
</Files>

# إعدادات الأمان
Options -Indexes
ServerSignature Off

# إعادة كتابة URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^event/([0-9]+)/?$ event.php?id=$1 [L,QSA]
RewriteRule ^events/category/([^/]+)/?$ events.php?category=$1 [L,QSA]